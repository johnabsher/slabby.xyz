name: GCS Upload
run-name: ${{ github.actor }} is uploading to GCS ðŸš€
on:
    push:
      branches:
        - main
jobs:
    upload-to-gcs:
      permissions:
        contents: 'read'
        id-token: 'write'

      runs-on: 'ubuntu-latest'
  
      steps:
      - id: 'checkout'
        uses: 'actions/checkout@v4'
  
      - id: 'auth'
        uses: 'google-github-actions/auth@v2'
        with:
          credentials_json: '${{ secrets.GCS_CREDENTIALS }}'
          # project_id: 'slabby-xyz-site'
          # workload_identity_provider: 'projects/396362042427/locations/global/workloadIdentityPools/github/providers/slabby-xyz'
            # 'projects/396362042427/locations/global/workloadIdentityPools/github'
          # projects/123456789/locations/global/workloadIdentityPools/my-pool/providers/my-provider'
          # service_account: 'my-service-account@my-project.iam.gserviceaccount.com'
  
      - id: 'upload-folder'
        uses: 'google-github-actions/upload-cloud-storage@v2'
        with:
          path: 'dist'
          destination: 'slabby.xyz'
          parent: false